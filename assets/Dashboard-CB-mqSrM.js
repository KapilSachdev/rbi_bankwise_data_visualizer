import{_ as N,e as w,S as ir,i as ea,t as E,P as qe,c as mt,a as or,b as F,m as z,p as ta,d as sr,f as ne,u as Q,r as ke,s as ra,l as aa,G as te,g as ie,C as na,h as lr,R as ge,j as Y,k as Je,n as ur,o as ia,q as cr,v as oa,w as sa,x as V,L as la,B as ua,y as fr,z as yt,A as ca,D as Ve,E as ze,F as fa,H as hr,I as pr,J as ha,K,M as et,N as Z,O as U,Q as pa,T as va,U as da,V as xe,W as ga,X as vr,Y as ma,Z as ya,$ as dr,a0 as ba,a1 as xa,a2 as Fe,a3 as Sa,a4 as bt,a5 as _a,a6 as Aa,a7 as Ca,a8 as Ta,a9 as wa,aa as ka,ab as Ge,ac as Ia,ad as gr,ae as mr,af as W,ag as tt,ah as La,ai as Ma,aj as xt,ak as yr,al as St,am as Se,an as br,ao as xr,ap as Da,aq as Oa,ar as _t,as as Sr,at as Pa,au as Ra,av as At,aw as Na,ax as Ea,ay as Ba,az as Va,aA as za,aB as Fa,aC as Ct,aD as Ga,aE as P,aF as I,aG as _r,aH as ja,aI as Za}from"./index-D66rBVsn.js";import{f as Ar}from"./time-Bsq9s4yx.js";import{E as rt}from"./EChartsContainer-BqpuueuC.js";import{R as Cr,T as Tr}from"./TopNInput-BtnpE1SK.js";import{c as wr,a as Ua,i as at,g as Ya,b as Wa,l as Ha,d as Xa,e as $a,t as Ka,r as Qa,D as kr,o as qa,f as Ja,h as en,j as tn,m as rn,s as an,u as _e,k as nn,S as Ie,n as on,p as Ir,q as Lr,v as nt,w as it,x as ot,y as Mr,z as st,C as sn,A as ln,B as un}from"./AccordionLayout-B7dsqWy4.js";import{P as Dr}from"./Pills-CH6JlYRY.js";import{T as cn}from"./TriangleSwitch-Yge0kYHG.js";var je=(function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,a){return wr(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,a,n){var i=this.coordinateSystem;if(i&&i.clampData){var o=i.clampData(t),s=i.dataToPoint(o);if(n)w(i.getAxes(),function(f,p){if(f.type==="category"&&a!=null){var v=f.getTicksCoords(),y=f.getTickModel().get("alignWithLabel"),d=o[p],_=a[p]==="x1"||a[p]==="y1";if(_&&!y&&(d+=1),v.length<2)return;if(v.length===2){s[p]=f.toGlobalCoord(f.getExtent()[_?1:0]);return}for(var m=void 0,x=void 0,g=1,b=0;b<v.length;b++){var A=v[b].coord,S=b===v.length-1?v[b-1].tickValue+g:v[b].tickValue;if(S===d){x=A;break}else if(S<d)m=A;else if(m!=null&&S>d){x=(A+m)/2;break}b===1&&(g=S-v[0].tickValue)}x==null&&(m?m&&(x=v[v.length-1].coord):x=v[0].coord),s[p]=f.toGlobalCoord(x)}});else{var l=this.getData(),u=l.getLayout("offset"),c=l.getLayout("size"),h=i.getBaseAxis().isHorizontal()?0:1;s[h]+=u+c/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},e})(ir);ir.registerClass(je);var fn=(function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return wr(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),a=this.get("largeThreshold");return a>t&&(t=a),t},e.prototype.brushSelector=function(t,a,n){return n.rect(a.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=ea(je.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:E.color.primary,borderWidth:2}},realtimeSort:!1}),e})(je),hn=(function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r})(),Tt=(function(r){N(e,r);function e(t){var a=r.call(this,t)||this;return a.type="sausage",a}return e.prototype.getDefaultShape=function(){return new hn},e.prototype.buildPath=function(t,a){var n=a.cx,i=a.cy,o=Math.max(a.r0||0,0),s=Math.max(a.r,0),l=(s-o)*.5,u=o+l,c=a.startAngle,h=a.endAngle,f=a.clockwise,p=Math.PI*2,v=f?h-c<p:c-h<p;v||(c=h-(f?p:-p));var y=Math.cos(c),d=Math.sin(c),_=Math.cos(h),m=Math.sin(h);v?(t.moveTo(y*o+n,d*o+i),t.arc(y*u+n,d*u+i,l,-Math.PI+c,c,!f)):t.moveTo(y*s+n,d*s+i),t.arc(n,i,s,c,h,!f),t.arc(_*u+n,m*u+i,l,h-Math.PI*2,h-Math.PI,!f),o!==0&&t.arc(n,i,o,h,c,f)},e})(qe);function pn(r,e){e=e||{};var t=e.isRoundCap;return function(a,n,i){var o=n.position;if(!o||o instanceof Array)return mt(a,n,i);var s=r(o),l=n.distance!=null?n.distance:5,u=this.shape,c=u.cx,h=u.cy,f=u.r,p=u.r0,v=(f+p)/2,y=u.startAngle,d=u.endAngle,_=(y+d)/2,m=t?Math.abs(f-p)/2:0,x=Math.cos,g=Math.sin,b=c+f*x(y),A=h+f*g(y),S="left",C="top";switch(s){case"startArc":b=c+(p-l)*x(_),A=h+(p-l)*g(_),S="center",C="top";break;case"insideStartArc":b=c+(p+l)*x(_),A=h+(p+l)*g(_),S="center",C="bottom";break;case"startAngle":b=c+v*x(y)+le(y,l+m,!1),A=h+v*g(y)+ue(y,l+m,!1),S="right",C="middle";break;case"insideStartAngle":b=c+v*x(y)+le(y,-l+m,!1),A=h+v*g(y)+ue(y,-l+m,!1),S="left",C="middle";break;case"middle":b=c+v*x(_),A=h+v*g(_),S="center",C="middle";break;case"endArc":b=c+(f+l)*x(_),A=h+(f+l)*g(_),S="center",C="bottom";break;case"insideEndArc":b=c+(f-l)*x(_),A=h+(f-l)*g(_),S="center",C="top";break;case"endAngle":b=c+v*x(d)+le(d,l+m,!0),A=h+v*g(d)+ue(d,l+m,!0),S="left",C="middle";break;case"insideEndAngle":b=c+v*x(d)+le(d,-l+m,!0),A=h+v*g(d)+ue(d,-l+m,!0),S="right",C="middle";break;default:return mt(a,n,i)}return a=a||{},a.x=b,a.y=A,a.align=S,a.verticalAlign=C,a}}function vn(r,e,t,a){if(or(a)){r.setTextConfig({rotation:a});return}else if(F(e)){r.setTextConfig({rotation:0});return}var n=r.shape,i=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,s=(i+o)/2,l,u=t(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=i;break;case"endAngle":case"insideEndAngle":l=o;break;default:r.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),r.setTextConfig({rotation:c})}function le(r,e,t){return e*Math.sin(r)*(t?-1:1)}function ue(r,e,t){return e*Math.cos(r)*(t?1:-1)}function dn(r,e,t){var a=r.get("borderRadius");if(a==null)return{cornerRadius:0};F(a)||(a=[a,a,a,a]);var n=Math.abs(e.r||0-e.r0||0);return{cornerRadius:z(a,function(i){return ta(i,n)})}}var Le=Math.max,Me=Math.min;function gn(r,e){var t=r.getArea&&r.getArea();if(at(r,"cartesian2d")){var a=r.getBaseAxis();if(a.type!=="category"||!a.onBand){var n=e.getLayout("bandWidth");a.isHorizontal()?(t.x-=n,t.width+=n*2):(t.y-=n,t.height+=n*2)}}return t}var mn=(function(r){N(e,r);function e(){var t=r.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,a,n,i){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,a,n):this._renderNormal(t,a,n,i))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,a){this._progressiveEls=[],this._incrementalRenderLarge(t,a)},e.prototype.eachRendered=function(t){sr(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var a=t.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},e.prototype._renderNormal=function(t,a,n,i){var o=this.group,s=t.getData(),l=this._data,u=t.coordinateSystem,c=u.getBaseAxis(),h;u.type==="cartesian2d"?h=c.isHorizontal():u.type==="polar"&&(h=c.dim==="angle");var f=t.isAnimationEnabled()?t:null,p=yn(t,u);p&&this._enableRealtimeSort(p,s,n);var v=t.get("clip",!0)||p,y=gn(u,s);o.removeClipPath();var d=t.get("roundCap",!0),_=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),x=m.get("borderRadius")||0,g=[],b=this._backgroundEls,A=i&&i.isInitSort,S=i&&i.type==="changeAxisOrder";function C(T){var D=ce[u.type](s,T);if(!D)return null;var k=Tn(u,h,D);return k.useStyle(m.getItemStyle()),u.type==="cartesian2d"?k.setShape("r",x):k.setShape("cornerRadius",x),g[T]=k,k}s.diff(l).add(function(T){var D=s.getItemModel(T),k=ce[u.type](s,T,D);if(k&&(_&&C(T),!(!s.hasValue(T)||!Mt[u.type](k)))){var O=!1;v&&(O=wt[u.type](y,k));var B=kt[u.type](t,s,T,k,h,f,c.model,!1,d);p&&(B.forceLabelAnimation=!0),Dt(B,s,T,D,k,t,h,u.type==="polar"),A?B.attr({shape:k}):p?It(p,f,B,k,T,h,!1,!1):ne(B,{shape:k},t,T),s.setItemGraphicEl(T,B),o.add(B),B.ignore=O}}).update(function(T,D){var k=s.getItemModel(T),O=ce[u.type](s,T,k);if(O){if(_){var B=void 0;b.length===0?B=C(D):(B=b[D],B.useStyle(m.getItemStyle()),u.type==="cartesian2d"?B.setShape("r",x):B.setShape("cornerRadius",x),g[T]=B);var $=ce[u.type](s,T),se=Pr(h,$,u);Q(B,{shape:se},f,T)}var R=l.getItemGraphicEl(D);if(!s.hasValue(T)||!Mt[u.type](O)){o.remove(R);return}var Te=!1;v&&(Te=wt[u.type](y,O),Te&&o.remove(R));var Jr=R&&(R.type==="sector"&&d||R.type==="sausage"&&!d);if(Jr&&(R&&ke(R,t,D),R=null),R?ra(R):R=kt[u.type](t,s,T,O,h,f,c.model,!0,d),p&&(R.forceLabelAnimation=!0),S){var gt=R.getTextContent();if(gt){var we=aa(gt);we.prevValue!=null&&(we.prevValue=we.value)}}else Dt(R,s,T,k,O,t,h,u.type==="polar");A?R.attr({shape:O}):p?It(p,f,R,O,T,h,!0,S):Q(R,{shape:O},t,T,null),s.setItemGraphicEl(T,R),R.ignore=Te,o.add(R)}}).remove(function(T){var D=l.getItemGraphicEl(T);D&&ke(D,t,T)}).execute();var L=this._backgroundGroup||(this._backgroundGroup=new te);L.removeAll();for(var M=0;M<g.length;++M)L.add(g[M]);o.add(L),this._backgroundEls=g,this._data=s},e.prototype._renderLarge=function(t,a,n){this._clear(),Pt(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,a){this._removeBackground(),Pt(a,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var a=t.get("clip",!0)&&Ua(t.coordinateSystem,!1,t),n=this.group;a?n.setClipPath(a):n.removeClipPath()},e.prototype._enableRealtimeSort=function(t,a,n){var i=this;if(a.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(a,t,n),this._isFirstFrame=!1;else{var s=function(l){var u=a.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){i._updateSortWithinSameData(a,s,o,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,a,n){var i=[];return t.each(t.mapDimension(a.dim),function(o,s){var l=n(s);l=l??NaN,i.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),i.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:z(i,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,a,n){for(var i=n.scale,o=t.mapDimension(n.dim),s=Number.MAX_VALUE,l=0,u=i.getOrdinalMeta().categories.length;l<u;++l){var c=t.rawIndexOf(o,i.getRawOrdinalNumber(l)),h=c<0?Number.MIN_VALUE:a(t.indexOfRawIndex(c));if(h>s)return!0;s=h}return!1},e.prototype._isOrderDifferentInView=function(t,a){for(var n=a.scale,i=n.getExtent(),o=Math.max(0,i[0]),s=Math.min(i[1],n.getOrdinalMeta().categories.length-1);o<=s;++o)if(t.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,a,n,i){if(this._isOrderChangedWithinSameData(t,a,n)){var o=this._dataSort(t,n,a);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,a,n){var i=a.baseAxis,o=this._dataSort(t,i,function(s){return t.get(t.mapDimension(a.otherAxis.dim),s)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:o})},e.prototype.remove=function(t,a){this._clear(this._model),this._removeOnRenderedListener(a)},e.prototype.dispose=function(t,a){this._removeOnRenderedListener(a)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var a=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){ke(i,t,ie(i).dataIndex)})):a.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e})(na),wt={cartesian2d:function(r,e){var t=e.width<0?-1:1,a=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),a<0&&(e.y+=e.height,e.height=-e.height);var n=r.x+r.width,i=r.y+r.height,o=Le(e.x,r.x),s=Me(e.x+e.width,n),l=Le(e.y,r.y),u=Me(e.y+e.height,i),c=s<o,h=u<l;return e.x=c&&o>n?s:o,e.y=h&&l>i?u:l,e.width=c?0:s-o,e.height=h?0:u-l,t<0&&(e.x+=e.width,e.width=-e.width),a<0&&(e.y+=e.height,e.height=-e.height),c||h},polar:function(r,e){var t=e.r0<=e.r?1:-1;if(t<0){var a=e.r;e.r=e.r0,e.r0=a}var n=Me(e.r,r.r),i=Le(e.r0,r.r0);e.r=n,e.r0=i;var o=n-i<0;if(t<0){var a=e.r;e.r=e.r0,e.r0=a}return o}},kt={cartesian2d:function(r,e,t,a,n,i,o,s,l){var u=new ge({shape:Y({},a),z2:1});if(u.__dataIndex=t,u.name="item",i){var c=u.shape,h=n?"height":"width";c[h]=0}return u},polar:function(r,e,t,a,n,i,o,s,l){var u=!n&&l?Tt:lr,c=new u({shape:a,z2:1});c.name="item";var h=Or(n);if(c.calculateTextPosition=pn(h,{isRoundCap:u===Tt}),i){var f=c.shape,p=n?"r":"endAngle",v={};f[p]=n?a.r0:a.startAngle,v[p]=a[p],(s?Q:ne)(c,{shape:v},i)}return c}};function yn(r,e){var t=r.get("realtimeSort",!0),a=e.getBaseAxis();if(t&&a.type==="category"&&e.type==="cartesian2d")return{baseAxis:a,otherAxis:e.getOtherAxis(a)}}function It(r,e,t,a,n,i,o,s){var l,u;i?(u={x:a.x,width:a.width},l={y:a.y,height:a.height}):(u={y:a.y,height:a.height},l={x:a.x,width:a.width}),s||(o?Q:ne)(t,{shape:l},e,n,null);var c=e?r.baseAxis.model:null;(o?Q:ne)(t,{shape:u},c,n)}function Lt(r,e){for(var t=0;t<e.length;t++)if(!isFinite(r[e[t]]))return!0;return!1}var bn=["x","y","width","height"],xn=["cx","cy","r","startAngle","endAngle"],Mt={cartesian2d:function(r){return!Lt(r,bn)},polar:function(r){return!Lt(r,xn)}},ce={cartesian2d:function(r,e,t){var a=r.getItemLayout(e);if(!a)return null;var n=t?_n(t,a):0,i=a.width>0?1:-1,o=a.height>0?1:-1;return{x:a.x+i*n/2,y:a.y+o*n/2,width:a.width-i*n,height:a.height-o*n}},polar:function(r,e,t){var a=r.getItemLayout(e);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function Sn(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function Or(r){return(function(e){var t=e?"Arc":"Angle";return function(a){switch(a){case"start":case"insideStart":case"end":case"insideEnd":return a+t;default:return a}}})(r)}function Dt(r,e,t,a,n,i,o,s){var l=e.getItemVisual(t,"style");if(s){if(!i.get("roundCap")){var c=r.shape,h=dn(a.getModel("itemStyle"),c);Y(c,h),r.setShape(c)}}else{var u=a.get(["itemStyle","borderRadius"])||0;r.setShape("r",u)}r.useStyle(l);var f=a.getShallow("cursor");f&&r.attr("cursor",f);var p=s?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",v=Je(a);ur(r,v,{labelFetcher:i,labelDataIndex:t,defaultText:Ya(i.getData(),t),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:p});var y=r.getTextContent();if(s&&y){var d=a.get(["label","position"]);r.textConfig.inside=d==="middle"?!0:null,vn(r,d==="outside"?p:d,Or(o),a.get(["label","rotate"]))}ia(y,v,i.getRawValue(t),function(m){return Wa(e,m)});var _=a.getModel(["emphasis"]);cr(r,_.get("focus"),_.get("blurScope"),_.get("disabled")),oa(r,a),Sn(n)&&(r.style.fill="none",r.style.stroke="none",w(r.states,function(m){m.style&&(m.style.fill=m.style.stroke="none")}))}function _n(r,e){var t=r.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var a=r.get(["itemStyle","borderWidth"])||0,n=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(a,n,i)}var An=(function(){function r(){}return r})(),Ot=(function(r){N(e,r);function e(t){var a=r.call(this,t)||this;return a.type="largeBar",a}return e.prototype.getDefaultShape=function(){return new An},e.prototype.buildPath=function(t,a){for(var n=a.points,i=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<n.length;c+=3)l[i]=u,l[o]=n[c+2],s[i]=n[c+i],s[o]=n[c+o],t.rect(s[0],s[1],l[0],l[1])},e})(qe);function Pt(r,e,t,a){var n=r.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=r.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var c=new Ot({shape:{points:u},incremental:!!a,silent:!0,z2:0});c.baseDimIdx=i,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),e.add(c),t&&t.push(c)}var h=new Ot({shape:{points:n.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=i,h.largeDataIndices=o,h.barWidth=s,e.add(h),h.useStyle(n.getVisual("style")),h.style.stroke=null,ie(h).seriesIndex=r.seriesIndex,r.get("silent")||(h.on("mousedown",Rt),h.on("mousemove",Rt)),t&&t.push(h)}var Rt=sa(function(r){var e=this,t=Cn(e,r.offsetX,r.offsetY);ie(e).dataIndex=t>=0?t:null},30,!1);function Cn(r,e,t){for(var a=r.baseDimIdx,n=1-a,i=r.shape.points,o=r.largeDataIndices,s=[],l=[],u=r.barWidth,c=0,h=i.length/3;c<h;c++){var f=c*3;if(l[a]=u,l[n]=i[f+2],s[a]=i[f+a],s[n]=i[f+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),e>=s[0]&&e<=s[0]+l[0]&&t>=s[1]&&t<=s[1]+l[1])return o[c]}return-1}function Pr(r,e,t){if(at(t,"cartesian2d")){var a=e,n=t.getArea();return{x:r?a.x:n.x,y:r?n.y:a.y,width:r?a.width:n.width,height:r?n.height:a.height}}else{var n=t.getArea(),i=e;return{cx:n.cx,cy:n.cy,r0:r?n.r0:i.r0,r:r?n.r:i.r,startAngle:r?i.startAngle:0,endAngle:r?i.endAngle:Math.PI*2}}}function Tn(r,e,t){var a=r.type==="polar"?lr:ge;return new a({shape:Pr(e,t,r),silent:!0,z2:0})}function wn(r){r.registerChartView(mn),r.registerSeriesModel(fn),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,V(Ha,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Xa("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,$a("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var a=e.componentType||"series";t.eachComponent({mainType:a,query:e},function(n){e.sortInfo&&n.axis.setCategorySortInfo(e.sortInfo)})})}var Nt=la.prototype,De=ua.prototype,Rr=(function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r})();(function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(Rr);function Oe(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var kn=(function(r){N(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-line",a}return e.prototype.getDefaultStyle=function(){return{stroke:E.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new Rr},e.prototype.buildPath=function(t,a){Oe(a)?Nt.buildPath.call(this,t,a):De.buildPath.call(this,t,a)},e.prototype.pointAt=function(t){return Oe(this.shape)?Nt.pointAt.call(this,t):De.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var a=this.shape,n=Oe(a)?[a.x2-a.x1,a.y2-a.y1]:De.tangentAt.call(this,t);return fr(n,n)},e})(qe),Pe=["fromSymbol","toSymbol"];function Et(r){return"_"+r+"Type"}function Bt(r,e,t){var a=e.getItemVisual(t,r);if(!a||a==="none")return a;var n=e.getItemVisual(t,r+"Size"),i=e.getItemVisual(t,r+"Rotate"),o=e.getItemVisual(t,r+"Offset"),s=e.getItemVisual(t,r+"KeepAspect"),l=hr(n),u=pr(o||0,l);return a+l+u+(i||"")+(s||"")}function Vt(r,e,t){var a=e.getItemVisual(t,r);if(!(!a||a==="none")){var n=e.getItemVisual(t,r+"Size"),i=e.getItemVisual(t,r+"Rotate"),o=e.getItemVisual(t,r+"Offset"),s=e.getItemVisual(t,r+"KeepAspect"),l=hr(n),u=pr(o||0,l),c=ha(a,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,c.name=r,c}}function In(r){var e=new kn({name:"line",subPixelOptimize:!0});return Ze(e.shape,r),e}function Ze(r,e){r.x1=e[0][0],r.y1=e[0][1],r.x2=e[1][0],r.y2=e[1][1],r.percent=1;var t=e[2];t?(r.cpx1=t[0],r.cpy1=t[1]):(r.cpx1=NaN,r.cpy1=NaN)}var Ln=(function(r){N(e,r);function e(t,a,n){var i=r.call(this)||this;return i._createLine(t,a,n),i}return e.prototype._createLine=function(t,a,n){var i=t.hostModel,o=t.getItemLayout(a),s=t.getItemVisual(a,"z2"),l=In(o);l.shape.percent=0,ne(l,{z2:K(s,0),shape:{percent:1}},i,a),this.add(l),w(Pe,function(u){var c=Vt(u,t,a);this.add(c),this[Et(u)]=Bt(u,t,a)},this),this._updateCommonStl(t,a,n)},e.prototype.updateData=function(t,a,n){var i=t.hostModel,o=this.childOfName("line"),s=t.getItemLayout(a),l={shape:{}};Ze(l.shape,s),Q(o,l,i,a),w(Pe,function(u){var c=Bt(u,t,a),h=Et(u);if(this[h]!==c){this.remove(this.childOfName(u));var f=Vt(u,t,a);this.add(f)}this[h]=c},this),this._updateCommonStl(t,a,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,a,n){var i=t.hostModel,o=this.childOfName("line"),s=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,u=n&&n.selectLineStyle,c=n&&n.labelStatesModels,h=n&&n.emphasisDisabled,f=n&&n.focus,p=n&&n.blurScope;if(!n||t.hasItemOption){var v=t.getItemModel(a),y=v.getModel("emphasis");s=y.getModel("lineStyle").getLineStyle(),l=v.getModel(["blur","lineStyle"]).getLineStyle(),u=v.getModel(["select","lineStyle"]).getLineStyle(),h=y.get("disabled"),f=y.get("focus"),p=y.get("blurScope"),c=Je(v)}var d=t.getItemVisual(a,"style"),_=d.stroke;o.useStyle(d),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,w(Pe,function(A){var S=this.childOfName(A);if(S){S.setColor(_),S.style.opacity=d.opacity;for(var C=0;C<yt.length;C++){var L=yt[C],M=o.getState(L);if(M){var T=M.style||{},D=S.ensureState(L),k=D.style||(D.style={});T.stroke!=null&&(k[S.__isEmptyBrush?"stroke":"fill"]=T.stroke),T.opacity!=null&&(k.opacity=T.opacity)}}S.markRedraw()}},this);var m=i.getRawValue(a);ur(this,c,{labelDataIndex:a,labelFetcher:{getFormattedLabel:function(A,S){return i.getFormattedLabel(A,S,t.dataType)}},inheritColor:_||E.color.neutral99,defaultOpacity:d.opacity,defaultText:(m==null?t.getName(a):isFinite(m)?ca(m):m)+""});var x=this.getTextContent();if(x){var g=c.normal;x.__align=x.style.align,x.__verticalAlign=x.style.verticalAlign,x.__position=g.get("position")||"middle";var b=g.get("distance");F(b)||(b=[b,b]),x.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),cr(this,f,p,h)},e.prototype.highlight=function(){Ve(this)},e.prototype.downplay=function(){ze(this)},e.prototype.updateLayout=function(t,a){this.setLinePoints(t.getItemLayout(a))},e.prototype.setLinePoints=function(t){var a=this.childOfName("line");Ze(a.shape,t),a.dirty()},e.prototype.beforeUpdate=function(){var t=this,a=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),i=t.getTextContent();if(!a&&!n&&(!i||i.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),h=l.pointAt(u),f=fa([],h,c);fr(f,f);function p(M,T){var D=M.__specifiedRotation;if(D==null){var k=l.tangentAt(T);M.attr("rotation",(T===1?-1:1)*Math.PI/2-Math.atan2(k[1],k[0]))}else M.attr("rotation",D)}if(a&&(a.setPosition(c),p(a,0),a.scaleX=a.scaleY=o*u,a.markRedraw()),n&&(n.setPosition(h),p(n,1),n.scaleX=n.scaleY=o*u,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var v=void 0,y=void 0,d=i.__labelDistance,_=d[0]*o,m=d[1]*o,x=u/2,g=l.tangentAt(x),b=[g[1],-g[0]],A=l.pointAt(x);b[1]>0&&(b[0]=-b[0],b[1]=-b[1]);var S=g[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var C=-Math.atan2(g[1],g[0]);h[0]<c[0]&&(C=Math.PI+C),i.rotation=C}var L=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":L=-m,y="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":L=m,y="top";break;default:L=0,y="middle"}switch(i.__position){case"end":i.x=f[0]*_+h[0],i.y=f[1]*m+h[1],v=f[0]>.8?"left":f[0]<-.8?"right":"center",y=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":i.x=-f[0]*_+c[0],i.y=-f[1]*m+c[1],v=f[0]>.8?"right":f[0]<-.8?"left":"center",y=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=_*S+c[0],i.y=c[1]+L,v=g[0]<0?"right":"left",i.originX=-_*S,i.originY=-L;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=A[0],i.y=A[1]+L,v="center",i.originY=-L;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-_*S+h[0],i.y=h[1]+L,v=g[0]>=0?"right":"left",i.originX=_*S,i.originY=-L;break}i.scaleX=i.scaleY=o,i.setStyle({verticalAlign:i.__verticalAlign||y,align:i.__align||v})}},e})(te),Mn=(function(){function r(e){this.group=new te,this._LineCtor=e||Ln}return r.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var a=this,n=a.group,i=a._lineData;a._lineData=e,i||n.removeAll();var o=zt(e);e.diff(i).add(function(s){t._doAdd(e,s,o)}).update(function(s,l){t._doUpdate(i,e,l,s,o)}).remove(function(s){n.remove(i.getItemGraphicEl(s))}).execute()},r.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,a){t.updateLayout(e,a)},this)},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=zt(e),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function a(s){!s.isGroup&&!Dn(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var i=t.getItemLayout(n);if(Re(i)){var o=new this._LineCtor(t,n,this._seriesScope);o.traverse(a),this.group.add(o),t.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(e){sr(this._progressiveEls||this.group,e)},r.prototype._doAdd=function(e,t,a){var n=e.getItemLayout(t);if(Re(n)){var i=new this._LineCtor(e,t,a);e.setItemGraphicEl(t,i),this.group.add(i)}},r.prototype._doUpdate=function(e,t,a,n,i){var o=e.getItemGraphicEl(a);if(!Re(t.getItemLayout(n))){this.group.remove(o);return}o?o.updateData(t,n,i):o=new this._LineCtor(t,n,i),t.setItemGraphicEl(n,o),this.group.add(o)},r})();function Dn(r){return r.animators&&r.animators.length>0}function zt(r){var e=r.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:Je(e)}}function Ft(r){return isNaN(r[0])||isNaN(r[1])}function Re(r){return r&&!Ft(r[0])&&!Ft(r[1])}var H=!0,oe=Math.min,q=Math.max,On=Math.pow,Pn=1e4,Rn=6,Nn=6,Gt="globalPan",En={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Bn={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},jt={brushStyle:{lineWidth:2,stroke:E.color.backgroundTint,fill:E.color.borderTint},transformable:!0,brushMode:"single",removeOnClick:!1},Vn=0,zn=(function(r){N(e,r);function e(t){var a=r.call(this)||this;return a._track=[],a._covers=[],a._handlers={},a._zr=t,a.group=new te,a._uid="brushController_"+Vn++,w(Wn,function(n,i){this._handlers[i]=et(n,this)},a),a}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var a=this._zr;this._enableGlobalPan||Ka(a,Gt,this._uid),w(this._handlers,function(n,i){a.on(i,n)}),this._brushType=t.brushType,this._brushOption=Z(U(jt),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Qa(t,Gt,this._uid),w(this._handlers,function(a,n){t.off(n,a)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var a=this._panels={};w(t,function(n){a[n.panelId]=U(n)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var a=this.group;return this._zr.add(a),a.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=a.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=z(t,function(f){return Z(U(jt),f,!0)});var a="\0-brush-index-",n=this._covers,i=this._covers=[],o=this,s=this._creatingCover;return new kr(n,t,u,l).add(c).update(c).remove(h).execute(),this;function l(f,p){return(f.id!=null?f.id:a+p)+"-"+f.brushType}function u(f,p){return l(f.__brushOption,p)}function c(f,p){var v=t[f];if(p!=null&&n[p]===s)i[f]=n[p];else{var y=i[f]=p!=null?(n[p].__brushOption=v,n[p]):Er(o,Nr(o,v));lt(o,y)}}function h(f){n[f]!==s&&o.group.remove(n[f])}},e.prototype.unmount=function(){return this.enableBrush(!1),Ue(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e})(pa);function Nr(r,e){var t=Ae[e.brushType].createCover(r,e);return t.__brushOption=e,Vr(t,e),r.group.add(t),t}function Er(r,e){var t=ut(e);return t.endCreating&&(t.endCreating(r,e),Vr(e,e.__brushOption)),e}function Br(r,e){var t=e.__brushOption;ut(e).updateCoverShape(r,e,t.range,t)}function Vr(r,e){var t=e.z;t==null&&(t=Pn),r.traverse(function(a){a.z=t,a.z2=t})}function lt(r,e){ut(e).updateCommon(r,e),Br(r,e)}function ut(r){return Ae[r.__brushOption.brushType]}function ct(r,e,t){var a=r._panels;if(!a)return H;var n,i=r._transform;return w(a,function(o){o.isTargetByCursor(e,t,i)&&(n=o)}),n}function zr(r,e){var t=r._panels;if(!t)return H;var a=e.__brushOption.panelId;return a!=null?t[a]:H}function Ue(r){var e=r._covers,t=e.length;return w(e,function(a){r.group.remove(a)},r),e.length=0,!!t}function X(r,e){var t=z(r._covers,function(a){var n=a.__brushOption,i=U(n.range);return{brushType:n.brushType,panelId:n.panelId,range:i}});r.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Fn(r){var e=r._track;if(!e.length)return!1;var t=e[e.length-1],a=e[0],n=t[0]-a[0],i=t[1]-a[1],o=On(n*n+i*i,.5);return o>Rn}function Fr(r){var e=r.length-1;return e<0&&(e=0),[r[0],r[e]]}function Gr(r,e,t,a){var n=new te;return n.add(new ge({name:"main",style:ft(t),silent:!0,draggable:!0,cursor:"move",drift:V(Zt,r,e,n,["n","s","w","e"]),ondragend:V(X,e,{isEnd:!0})})),w(a,function(i){n.add(new ge({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:V(Zt,r,e,n,i),ondragend:V(X,e,{isEnd:!0})}))}),n}function jr(r,e,t,a){var n=a.brushStyle.lineWidth||0,i=q(n,Nn),o=t[0][0],s=t[1][0],l=o-n/2,u=s-n/2,c=t[0][1],h=t[1][1],f=c-i+n/2,p=h-i+n/2,v=c-o,y=h-s,d=v+n,_=y+n;j(r,e,"main",o,s,v,y),a.transformable&&(j(r,e,"w",l,u,i,_),j(r,e,"e",f,u,i,_),j(r,e,"n",l,u,d,i),j(r,e,"s",l,p,d,i),j(r,e,"nw",l,u,i,i),j(r,e,"ne",f,u,i,i),j(r,e,"sw",l,p,i,i),j(r,e,"se",f,p,i,i))}function Ye(r,e){var t=e.__brushOption,a=t.transformable,n=e.childAt(0);n.useStyle(ft(t)),n.attr({silent:!a,cursor:a?"move":"default"}),w([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=e.childOfName(i.join("")),s=i.length===1?We(r,i[0]):jn(r,i);o&&o.attr({silent:!a,invisible:!a,cursor:a?Bn[s]+"-resize":null})})}function j(r,e,t,a,n,i,o){var s=e.childOfName(t);s&&s.setShape(Un(ht(r,e,[[a,n],[a+i,n+o]])))}function ft(r){return xe({strokeNoScale:!0},r.brushStyle)}function Zr(r,e,t,a){var n=[oe(r,t),oe(e,a)],i=[q(r,t),q(e,a)];return[[n[0],i[0]],[n[1],i[1]]]}function Gn(r){return vr(r.group)}function We(r,e){var t={w:"left",e:"right",n:"top",s:"bottom"},a={left:"w",right:"e",top:"n",bottom:"s"},n=ga(t[e],Gn(r));return a[n]}function jn(r,e){var t=[We(r,e[0]),We(r,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function Zt(r,e,t,a,n,i){var o=t.__brushOption,s=r.toRectRange(o.range),l=Ur(e,n,i);w(a,function(u){var c=En[u];s[c[0]][c[1]]+=l[c[0]]}),o.range=r.fromRectRange(Zr(s[0][0],s[1][0],s[0][1],s[1][1])),lt(e,t),X(e,{isEnd:!1})}function Zn(r,e,t,a){var n=e.__brushOption.range,i=Ur(r,t,a);w(n,function(o){o[0]+=i[0],o[1]+=i[1]}),lt(r,e),X(r,{isEnd:!1})}function Ur(r,e,t){var a=r.group,n=a.transformCoordToLocal(e,t),i=a.transformCoordToLocal(0,0);return[n[0]-i[0],n[1]-i[1]]}function ht(r,e,t){var a=zr(r,e);return a&&a!==H?a.clipPath(t,r._transform):U(t)}function Un(r){var e=oe(r[0][0],r[1][0]),t=oe(r[0][1],r[1][1]),a=q(r[0][0],r[1][0]),n=q(r[0][1],r[1][1]);return{x:e,y:t,width:a-e,height:n-t}}function Yn(r,e,t){if(!(!r._brushType||Hn(r,e.offsetX,e.offsetY))){var a=r._zr,n=r._covers,i=ct(r,e,t);if(!r._dragging)for(var o=0;o<n.length;o++){var s=n[o].__brushOption;if(i&&(i===H||s.panelId===i.panelId)&&Ae[s.brushType].contain(n[o],t[0],t[1]))return}i&&a.setCursorStyle("crosshair")}}function He(r){var e=r.event;e.preventDefault&&e.preventDefault()}function Xe(r,e,t){return r.childOfName("main").contain(e,t)}function Yr(r,e,t,a){var n=r._creatingCover,i=r._creatingPanel,o=r._brushOption,s;if(r._track.push(t.slice()),Fn(r)||n){if(i&&!n){o.brushMode==="single"&&Ue(r);var l=U(o);l.brushType=Ut(l.brushType,i),l.panelId=i===H?null:i.panelId,n=r._creatingCover=Nr(r,l),r._covers.push(n)}if(n){var u=Ae[Ut(r._brushType,i)],c=n.__brushOption;c.range=u.getCreatingRange(ht(r,n,r._track)),a&&(Er(r,n),u.updateCommon(r,n)),Br(r,n),s={isEnd:a}}}else a&&o.brushMode==="single"&&o.removeOnClick&&ct(r,e,t)&&Ue(r)&&(s={isEnd:a,removeOnClick:!0});return s}function Ut(r,e){return r==="auto"?e.defaultBrushType:r}var Wn={mousedown:function(r){if(this._dragging)Yt(this,r);else if(!r.target||!r.target.draggable){He(r);var e=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var t=this._creatingPanel=ct(this,r,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(r){var e=r.offsetX,t=r.offsetY,a=this.group.transformCoordToLocal(e,t);if(Yn(this,r,a),this._dragging){He(r);var n=Yr(this,r,a,!1);n&&X(this,n)}},mouseup:function(r){Yt(this,r)}};function Yt(r,e){if(r._dragging){He(e);var t=e.offsetX,a=e.offsetY,n=r.group.transformCoordToLocal(t,a),i=Yr(r,e,n,!0);r._dragging=!1,r._track=[],r._creatingCover=null,i&&X(r,i)}}function Hn(r,e,t){var a=r._zr;return e<0||e>a.getWidth()||t<0||t>a.getHeight()}var Ae={lineX:Wt(0),lineY:Wt(1),rect:{createCover:function(r,e){function t(a){return a}return Gr({toRectRange:t,fromRectRange:t},r,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var e=Fr(r);return Zr(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(r,e,t,a){jr(r,e,t,a)},updateCommon:Ye,contain:Xe},polygon:{createCover:function(r,e){var t=new te;return t.add(new da({name:"main",style:ft(e),silent:!0})),t},getCreatingRange:function(r){return r},endCreating:function(r,e){e.remove(e.childAt(0)),e.add(new va({name:"main",draggable:!0,drift:V(Zn,r,e),ondragend:V(X,r,{isEnd:!0})}))},updateCoverShape:function(r,e,t,a){e.childAt(0).setShape({points:ht(r,e,t)})},updateCommon:Ye,contain:Xe}};function Wt(r){return{createCover:function(e,t){return Gr({toRectRange:function(a){var n=[a,[0,100]];return r&&n.reverse(),n},fromRectRange:function(a){return a[r]}},e,t,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(e){var t=Fr(e),a=oe(t[0][r],t[1][r]),n=q(t[0][r],t[1][r]);return[a,n]},updateCoverShape:function(e,t,a,n){var i,o=zr(e,t);if(o!==H&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(r);else{var s=e._zr;i=[0,[s.getWidth(),s.getHeight()][1-r]]}var l=[a,i];r&&l.reverse(),jr(e,t,l,n)},updateCommon:Ye,contain:Xe}}function Xn(r){return r=pt(r),function(e){return ma(e,r)}}function $n(r,e){return r=pt(r),function(t){var a=e??t,n=a?r.width:r.height,i=a?r.x:r.y;return[i,i+(n||0)]}}function Kn(r,e,t){var a=pt(r);return function(n,i){return a.contain(i[0],i[1])&&!qa(n,e,t)}}function pt(r){return ya.create(r)}var Qn=(function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e})(Ja),qn=(function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e})(en);function Jn(r){r.registerComponentModel(Qn),r.registerComponentView(qn),tn(r)}var G=(function(){function r(){}return r})(),Wr={};function re(r,e){Wr[r]=e}function Hr(r){return Wr[r]}var ei=(function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;w(this.option.feature,function(a,n){var i=Hr(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),Z(a,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:E.color.border,borderRadius:0,borderWidth:0,padding:E.size.m,itemSize:15,itemGap:E.size.s,showTitle:!0,iconStyle:{borderColor:E.color.accent50,color:"none"},emphasis:{iconStyle:{borderColor:E.color.accent50}},tooltip:{show:!1,position:"bottom"}},e})(dr),ti=(function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,a,n,i){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",u=t.get("feature")||{},c=this._features||(this._features={}),h=[];w(u,function(m,x){h.push(x)}),new kr(this._featureNames||[],h).add(f).update(f).remove(V(f,null)).execute(),this._featureNames=h;function f(m,x){var g=h[m],b=h[x],A=u[g],S=new ba(A,t,t.ecModel),C;if(i&&i.newTitle!=null&&i.featureName===g&&(A.title=i.newTitle),g&&!b){if(ri(g))C={onclick:S.option.onclick,featureName:g};else{var L=Hr(g);if(!L)return;C=new L}c[g]=C}else if(C=c[b],!C)return;C.uid=xa("toolbox-feature"),C.model=S,C.ecModel=a,C.api=n;var M=C instanceof G;if(!g&&b){M&&C.dispose&&C.dispose(a,n);return}if(!S.get("show")||M&&C.unusable){M&&C.remove&&C.remove(a,n);return}p(S,C,g),S.setIconStatus=function(T,D){var k=this.option,O=this.iconPaths;k.iconStatus=k.iconStatus||{},k.iconStatus[T]=D,O[T]&&(D==="emphasis"?Ve:ze)(O[T])},C instanceof G&&C.render&&C.render(S,a,n,i)}function p(m,x,g){var b=m.getModel("iconStyle"),A=m.getModel(["emphasis","iconStyle"]),S=x instanceof G&&x.getIcons?x.getIcons():m.get("icon"),C=m.get("title")||{},L,M;Fe(S)?(L={},L[g]=S):L=S,Fe(C)?(M={},M[g]=C):M=C;var T=m.iconPaths={};w(L,function(D,k){var O=Sa(D,{},{x:-s/2,y:-s/2,width:s,height:s});O.setStyle(b.getItemStyle());var B=O.ensureState("emphasis");B.style=A.getItemStyle();var $=new bt({style:{text:M[k],align:A.get("textAlign"),borderRadius:A.get("textBorderRadius"),padding:A.get("textPadding"),fill:null,font:_a({fontStyle:A.get("textFontStyle"),fontFamily:A.get("textFontFamily"),fontSize:A.get("textFontSize"),fontWeight:A.get("textFontWeight")},a)},ignore:!0});O.setTextContent($),Aa({el:O,componentModel:t,itemName:k,formatterParamsExtra:{title:M[k]}}),O.__title=M[k],O.on("mouseover",function(){var se=A.getItemStyle(),R=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";$.setStyle({fill:A.get("textFill")||se.fill||se.stroke||E.color.neutral99,backgroundColor:A.get("textBackgroundColor")}),O.setTextConfig({position:A.get("textPosition")||R}),$.ignore=!t.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){m.get(["iconStatus",k])!=="emphasis"&&n.leaveEmphasis(this),$.hide()}),(m.get(["iconStatus",k])==="emphasis"?Ve:ze)(O),o.add(O),O.on("click",et(x.onclick,x,a,n,k)),T[k]=O})}var v=Ca(t,n).refContainer,y=t.getBoxLayoutParams(),d=t.get("padding"),_=Ta(y,v,d);wa(t.get("orient"),o,t.get("itemGap"),_.width,_.height),ka(o,y,v,d),o.add(rn(o.getBoundingRect(),t)),l||o.eachChild(function(m){var x=m.__title,g=m.ensureState("emphasis"),b=g.textConfig||(g.textConfig={}),A=m.getTextContent(),S=A&&A.ensureState("emphasis");if(S&&!Ge(S)&&x){var C=S.style||(S.style={}),L=Ia(x,bt.makeFont(C)),M=m.x+o.x,T=m.y+o.y+s,D=!1;T+L.height>n.getHeight()&&(b.position="top",D=!0);var k=D?-5-L.height:s+10;M+L.width/2>n.getWidth()?(b.position=["100%",k],C.align="right"):M-L.width/2<0&&(b.position=[0,k],C.align="left")}})},e.prototype.updateView=function(t,a,n,i){w(this._features,function(o){o instanceof G&&o.updateView&&o.updateView(o.model,a,n,i)})},e.prototype.remove=function(t,a){w(this._features,function(n){n instanceof G&&n.remove&&n.remove(t,a)}),this.group.removeAll()},e.prototype.dispose=function(t,a){w(this._features,function(n){n instanceof G&&n.dispose&&n.dispose(t,a)})},e.type="toolbox",e})(gr);function ri(r){return r.indexOf("my")===0}var ai=(function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,a){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",o=a.getZr().painter.getType()==="svg",s=o?"svg":n.get("type",!0)||"png",l=a.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||E.color.neutral00,connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=mr.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=i+"."+s,c.target="_blank",c.href=l;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||o){var f=l.split(","),p=f[0].indexOf("base64")>-1,v=o?decodeURIComponent(f[1]):f[1];p&&(v=window.atob(v));var y=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var d=v.length,_=new Uint8Array(d);d--;)_[d]=v.charCodeAt(d);var m=new Blob([_]);window.navigator.msSaveOrOpenBlob(m,y)}else{var x=document.createElement("iframe");document.body.appendChild(x);var g=x.contentWindow,b=g.document;b.open("image/svg+xml","replace"),b.write(v),b.close(),g.focus(),b.execCommand("SaveAs",!0,y),document.body.removeChild(x)}}else{var A=n.get("lang"),S='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(A&&A[0]||"")+'" /></body>',C=window.open();C.document.write(S),C.document.title=i}},e.getDefaultOption=function(t){var a={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:E.color.neutral00,name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return a},e})(G),Ht="__ec_magicType_stack__",ni=[["line","bar"],["stack"]],ii=(function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,a=t.get("icon"),n={};return w(t.get("type"),function(i){a[i]&&(n[i]=a[i])}),n},e.getDefaultOption=function(t){var a={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return a},e.prototype.onclick=function(t,a,n){var i=this.model,o=i.get(["seriesIndex",n]);if(Xt[n]){var s={series:[]},l=function(h){var f=h.subType,p=h.id,v=Xt[n](f,p,h,i);v&&(xe(v,h.option),s.series.push(v));var y=h.coordinateSystem;if(y&&y.type==="cartesian2d"&&(n==="line"||n==="bar")){var d=y.getAxesByScale("ordinal")[0];if(d){var _=d.dim,m=_+"Axis",x=h.getReferringComponents(m,La).models[0],g=x.componentIndex;s[m]=s[m]||[];for(var b=0;b<=g;b++)s[m][g]=s[m][g]||{};s[m][g].boundaryGap=n==="bar"}}};w(ni,function(h){W(h,n)>=0&&w(h,function(f){i.setIconStatus(f,"normal")})}),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,c=n;n==="stack"&&(u=Z({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",n])!=="emphasis"&&(c="tiled")),a.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e})(G),Xt={line:function(r,e,t,a){if(r==="bar")return Z({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},a.get(["option","line"])||{},!0)},bar:function(r,e,t,a){if(r==="line")return Z({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},a.get(["option","bar"])||{},!0)},stack:function(r,e,t,a){var n=t.get("stack")===Ht;if(r==="line"||r==="bar")return a.setIconStatus("stack",n?"normal":"emphasis"),Z({id:e,stack:n?"":Ht},a.get(["option","stack"])||{},!0)}};tt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,e){e.mergeOption(r.newOption)});var Ce=new Array(60).join("-"),J="	";function oi(r){var e={},t=[],a=[];return r.eachRawSeries(function(n){var i=n.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var o=i.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},a.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(n)}else t.push(n)}else t.push(n)}),{seriesGroupByCategoryAxis:e,other:t,meta:a}}function si(r){var e=[];return w(r,function(t,a){var n=t.categoryAxis,i=t.valueAxis,o=i.dim,s=[" "].concat(z(t.series,function(p){return p.name})),l=[n.model.getCategories()];w(t.series,function(p){var v=p.getRawData();l.push(p.getRawData().mapArray(v.mapDimension(o),function(y){return y}))});for(var u=[s.join(J)],c=0;c<l[0].length;c++){for(var h=[],f=0;f<l.length;f++)h.push(l[f][c]);u.push(h.join(J))}e.push(u.join(`
`))}),e.join(`

`+Ce+`

`)}function li(r){return z(r,function(e){var t=e.getRawData(),a=[e.name],n=[];return t.each(t.dimensions,function(){for(var i=arguments.length,o=arguments[i-1],s=t.getName(o),l=0;l<i-1;l++)n[l]=arguments[l];a.push((s?s+J:"")+n.join(J))}),a.join(`
`)}).join(`

`+Ce+`

`)}function ui(r){var e=oi(r);return{value:yr([si(e.seriesGroupByCategoryAxis),li(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+Ce+`

`),meta:e.meta}}function me(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ci(r){var e=r.slice(0,r.indexOf(`
`));if(e.indexOf(J)>=0)return!0}var $e=new RegExp("["+J+"]+","g");function fi(r){for(var e=r.split(/\n+/g),t=me(e.shift()).split($e),a=[],n=z(t,function(l){return{name:l,data:[]}}),i=0;i<e.length;i++){var o=me(e[i]).split($e);a.push(o.shift());for(var s=0;s<o.length;s++)n[s]&&(n[s].data[i]=o[s])}return{series:n,categories:a}}function hi(r){for(var e=r.split(/\n+/g),t=me(e.shift()),a=[],n=0;n<e.length;n++){var i=me(e[n]);if(i){var o=i.split($e),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),a[n]={name:s,value:[]},l=a[n].value):l=a[n]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);l.length===1&&(u?a[n].value=l[0]:a[n]=l[0])}}return{name:t,data:a}}function pi(r,e){var t=r.split(new RegExp(`
*`+Ce+`
*`,"g")),a={series:[]};return w(t,function(n,i){if(ci(n)){var o=fi(n),s=e[i],l=s.axisDim+"Axis";s&&(a[l]=a[l]||[],a[l][s.axisIndex]={data:o.categories},a.series=a.series.concat(o.series))}else{var o=hi(n);a.series.push(o)}}),a}var vi=(function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,a){setTimeout(function(){a.dispatchAction({type:"hideTip"})});var n=a.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||E.color.neutral00;var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var h=i.get("optionToContent"),f=i.get("contentToOption"),p=ui(t);if(Ge(h)){var v=h(a.getOption());Fe(v)?u.innerHTML=v:Ma(v)&&u.appendChild(v)}else{c.readOnly=i.get("readOnly");var y=c.style;y.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",y.color=i.get("textColor"),y.borderColor=i.get("textareaBorderColor"),y.backgroundColor=i.get("textareaColor"),c.value=p.value,u.appendChild(c)}var d=p.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),g=document.createElement("div");m+=";background-color:"+i.get("buttonColor"),m+=";color:"+i.get("buttonTextColor");var b=this;function A(){n.removeChild(o),b._dom=null}xt(x,"click",A),xt(g,"click",function(){if(f==null&&h!=null||f!=null&&h==null){A();return}var S;try{Ge(f)?S=f(u,a.getOption()):S=pi(c.value,d)}catch(C){throw A(),new Error("Data view format error "+C)}S&&a.dispatchAction({type:"changeDataView",newOption:S}),A()}),x.innerHTML=l[1],g.innerHTML=l[2],g.style.cssText=x.style.cssText=m,!i.get("readOnly")&&_.appendChild(g),_.appendChild(x),o.appendChild(s),o.appendChild(u),o.appendChild(_),u.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},e.prototype.remove=function(t,a){this._dom&&a.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,a){this.remove(t,a)},e.getDefaultOption=function(t){var a={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:E.color.background,textColor:E.color.primary,textareaColor:E.color.background,textareaBorderColor:E.color.border,buttonColor:E.color.accent50,buttonTextColor:E.color.neutral00};return a},e})(G);function di(r,e){return z(r,function(t,a){var n=e&&e[a];if(St(n)&&!F(n)){var i=St(t)&&!F(t);i||(t={value:t});var o=n.name!=null&&t.name==null;return t=xe(t,n),o&&delete t.name,t}else return t})}tt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,e){var t=[];w(r.newOption.series,function(a){var n=e.getSeriesByName(a.name)[0];if(!n)t.push(Y({type:"scatter"},a));else{var i=n.get("data");t.push({name:a.name,data:di(a.data,i)})}}),e.mergeOption(xe({series:t},r.newOption))});var Xr=w,$r=Se();function gi(r,e){var t=vt(r);Xr(e,function(a,n){for(var i=t.length-1;i>=0;i--){var o=t[i];if(o[n])break}if(i<0){var s=r.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();t[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),t.push(e)}function mi(r){var e=vt(r),t=e[e.length-1];e.length>1&&e.pop();var a={};return Xr(t,function(n,i){for(var o=e.length-1;o>=0;o--)if(n=e[o][i],n){a[i]=n;break}}),a}function yi(r){$r(r).snapshots=null}function bi(r){return vt(r).length}function vt(r){var e=$r(r);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var xi=(function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,a){yi(t),a.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var a={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return a},e})(G);tt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,e){e.resetOption("recreate")});var Si=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Kr=(function(){function r(e,t,a){var n=this;this._targetInfoList=[];var i=$t(t,e);w(_i,function(o,s){(!a||!a.include||W(a.include,s)>=0)&&o(i,n._targetInfoList)})}return r.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(a,n,i){if((a.coordRanges||(a.coordRanges=[])).push(n),!a.coordRange){a.coordRange=n;var o=Ne[a.brushType](0,i,n);a.__rangeOffset={offset:Jt[a.brushType](o.values,a.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},r.prototype.matchOutputRanges=function(e,t,a){w(e,function(n){var i=this.findTargetInfo(n,t);i&&i!==!0&&w(i.coordSyses,function(o){var s=Ne[n.brushType](1,o,n.range,!0);a(n,s.values,o,t)})},this)},r.prototype.setInputRanges=function(e,t){w(e,function(a){var n=this.findTargetInfo(a,t);if(a.range=a.range||[],n&&n!==!0){a.panelId=n.panelId;var i=Ne[a.brushType](0,n.coordSys,a.coordRange),o=a.__rangeOffset;a.range=o?Jt[a.brushType](i.values,o.offset,Ai(i.xyMinMax,o.xyMinMax)):i.values}},this)},r.prototype.makePanelOpts=function(e,t){return z(this._targetInfoList,function(a){var n=a.getPanelRect();return{panelId:a.panelId,defaultBrushType:t?t(a):null,clipPath:Xn(n),isTargetByCursor:Kn(n,e,a.coordSysModel),getLinearBrushOtherExtent:$n(n)}})},r.prototype.controlSeries=function(e,t,a){var n=this.findTargetInfo(e,a);return n===!0||n&&W(n.coordSyses,t.coordinateSystem)>=0},r.prototype.findTargetInfo=function(e,t){for(var a=this._targetInfoList,n=$t(t,e),i=0;i<a.length;i++){var o=a[i],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<Kt.length;l++)if(Kt[l](n,o))return o}return!0},r})();function Ke(r){return r[0]>r[1]&&r.reverse(),r}function $t(r,e){return br(r,e,{includeMainTypes:Si})}var _i={grid:function(r,e){var t=r.xAxisModels,a=r.yAxisModels,n=r.gridModels,i=xr(),o={},s={};!t&&!a&&!n||(w(t,function(l){var u=l.axis.grid.model;i.set(u.id,u),o[u.id]=!0}),w(a,function(l){var u=l.axis.grid.model;i.set(u.id,u),s[u.id]=!0}),w(n,function(l){i.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),i.each(function(l){var u=l.coordinateSystem,c=[];w(u.getCartesians(),function(h,f){(W(t,h.getAxis("x").model)>=0||W(a,h.getAxis("y").model)>=0)&&c.push(h)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:Qt.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(r,e){w(r.geoModels,function(t){var a=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:a,coordSyses:[a],getPanelRect:Qt.geo})})}},Kt=[function(r,e){var t=r.xAxisModel,a=r.yAxisModel,n=r.gridModel;return!n&&t&&(n=t.axis.grid.model),!n&&a&&(n=a.axis.grid.model),n&&n===e.gridModel},function(r,e){var t=r.geoModel;return t&&t===e.geoModel}],Qt={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,e=r.getBoundingRect().clone();return e.applyTransform(vr(r)),e}},Ne={lineX:V(qt,0),lineY:V(qt,1),rect:function(r,e,t,a){var n=r?e.pointToData([t[0][0],t[1][0]],a):e.dataToPoint([t[0][0],t[1][0]],a),i=r?e.pointToData([t[0][1],t[1][1]],a):e.dataToPoint([t[0][1],t[1][1]],a),o=[Ke([n[0],i[0]]),Ke([n[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(r,e,t,a){var n=[[1/0,-1/0],[1/0,-1/0]],i=z(t,function(o){var s=r?e.pointToData(o,a):e.dataToPoint(o,a);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:i,xyMinMax:n}}};function qt(r,e,t,a){var n=t.getAxis(["x","y"][r]),i=Ke(z([0,1],function(s){return e?n.coordToData(n.toLocalCoord(a[s]),!0):n.toGlobalCoord(n.dataToCoord(a[s]))})),o=[];return o[r]=i,o[1-r]=[NaN,NaN],{values:i,xyMinMax:o}}var Jt={lineX:V(er,0),lineY:V(er,1),rect:function(r,e,t){return[[r[0][0]-t[0]*e[0][0],r[0][1]-t[0]*e[0][1]],[r[1][0]-t[1]*e[1][0],r[1][1]-t[1]*e[1][1]]]},polygon:function(r,e,t){return z(r,function(a,n){return[a[0]-t[0]*e[n][0],a[1]-t[1]*e[n][1]]})}};function er(r,e,t,a){return[e[0]-a[r]*t[0],e[1]-a[r]*t[1]]}function Ai(r,e){var t=tr(r),a=tr(e),n=[t[0]/a[0],t[1]/a[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function tr(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}var Qe=w,Ci=Oa("toolbox-dataZoom_"),Ti=(function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,a,n,i){this._brushController||(this._brushController=new zn(n.getZr()),this._brushController.on("brush",et(this._onBrush,this)).mount()),Ii(t,a,this,i,n),ki(t,a)},e.prototype.onclick=function(t,a,n){wi[n].call(this)},e.prototype.remove=function(t,a){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,a){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var a=t.areas;if(!t.isEnd||!a.length)return;var n={},i=this.ecModel;this._brushController.updateCovers([]);var o=new Kr(dt(this.model),i,{include:["grid"]});o.matchOutputRanges(a,i,function(u,c,h){if(h.type==="cartesian2d"){var f=u.brushType;f==="rect"?(s("x",h,c[0]),s("y",h,c[1])):s({lineX:"x",lineY:"y"}[f],h,c)}}),gi(i,n),this._dispatchZoomAction(n);function s(u,c,h){var f=c.getAxis(u),p=f.model,v=l(u,p,i),y=v.findRepresentativeAxisProxy(p).getMinMaxSpan();(y.minValueSpan!=null||y.maxValueSpan!=null)&&(h=an(0,h.slice(),f.scale.getExtent(),0,y.minValueSpan,y.maxValueSpan)),v&&(n[v.id]={dataZoomId:v.id,startValue:h[0],endValue:h[1]})}function l(u,c,h){var f;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(p){var v=p.getAxisModel(u,c.componentIndex);v&&(f=p)}),f}},e.prototype._dispatchZoomAction=function(t){var a=[];Qe(t,function(n,i){a.push(U(n))}),a.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:a})},e.getDefaultOption=function(t){var a={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:E.color.backgroundTint}};return a},e})(G),wi={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(mi(this.ecModel))}};function dt(r){var e={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function ki(r,e){r.setIconStatus("back",bi(e)>1?"emphasis":"normal")}function Ii(r,e,t,a,n){var i=t._isZoomActive;a&&a.type==="takeGlobalCursor"&&(i=a.key==="dataZoomSelect"?a.dataZoomSelectActive:!1),t._isZoomActive=i,r.setIconStatus("zoom",i?"emphasis":"normal");var o=new Kr(dt(r),e,{include:["grid"]}),s=o.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}Da("dataZoom",function(r){var e=r.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var a=e.getModel(t),n=[],i=dt(a),o=br(r,i);Qe(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),Qe(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var h=l.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:a.get("filterMode",!0)||"filter",id:Ci+u+h};f[c]=h,n.push(f)}return n});function Qr(r){r.registerComponentModel(ei),r.registerComponentView(ti),re("saveAsImage",ai),re("magicType",ii),re("dataView",vi),re("dataZoom",Ti),re("restore",xi),_e(Jn)}function Li(r,e){if(!r)return!1;for(var t=F(r)?r:[r],a=0;a<t.length;a++)if(t[a]&&t[a][e])return!0;return!1}function fe(r){Pa(r,"label",["show"])}var he=Se(),ee=(function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t.preventAutoZ=!0,t}return e.prototype.init=function(t,a,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(mr.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,a){this._mergeOption(t,a,!1,!1)},e.prototype._mergeOption=function(t,a,n,i){var o=this.mainType;n||a.eachSeries(function(s){var l=s.get(this.mainType,!0),u=he(s)[o];if(!l||!l.data){he(s)[o]=null;return}u?u._mergeOption(l,a,!0):(i&&fe(l),w(l.data,function(c){c instanceof Array?(fe(c[0]),fe(c[1])):fe(c)}),u=this.createMarkerModelFromSeries(l,this,a),Y(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),he(s)[o]=u},this)},e.prototype.formatTooltip=function(t,a,n){var i=this.getData(),o=this.getRawValue(t),s=i.getName(t);return _t("section",{header:this.name,blocks:[_t("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,a){var n=Sr.prototype.getDataParams.call(this,t,a),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},e.getMarkerModelFromSeries=function(t,a){return he(t)[a]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e})(dr);Ra(ee,Sr.prototype);function Mi(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function Di(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function pe(r,e,t,a,n,i,o){var s=[],l=nn(e,n),u=l?e.getCalculationInfo("stackResultDimension"):n,c=ye(e,u,r),h=e.hostModel,f=h.indicesOfNearest(t,u,c)[0];s[i]=e.get(a,f),s[o]=e.get(u,f);var p=e.get(n,f),v=Na(e.get(n,f));return v=Math.min(v,20),v>=0&&(s[o]=+s[o].toFixed(v)),[s,p]}var ve={min:V(pe,"min"),max:V(pe,"max"),average:V(pe,"average"),median:V(pe,"median")};function rr(r,e){if(e){var t=r.getData(),a=r.coordinateSystem,n=a&&a.dimensions;if(!Di(e)&&!F(e.coord)&&F(n)){var i=qr(e,t,a,r);if(e=U(e),e.type&&ve[e.type]&&i.baseAxis&&i.valueAxis){var o=W(n,i.baseAxis.dim),s=W(n,i.valueAxis.dim),l=ve[e.type](t,i.valueAxis.dim,i.baseDataDim,i.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!F(n)){e.coord=[];var u=r.getBaseAxis();if(u&&e.type&&ve[e.type]){var c=a.getOtherAxis(u);c&&(e.value=ye(t,t.mapDimension(c.dim),e.type))}}else for(var h=e.coord,f=0;f<2;f++)ve[h[f]]&&(h[f]=ye(t,t.mapDimension(n[f]),h[f]));return e}}function qr(r,e,t,a){var n={};return r.valueIndex!=null||r.valueDim!=null?(n.valueDataDim=r.valueIndex!=null?e.getDimension(r.valueIndex):r.valueDim,n.valueAxis=t.getAxis(Oi(a,n.valueDataDim)),n.baseAxis=t.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=a.getBaseAxis(),n.valueAxis=t.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function Oi(r,e){var t=r.getData().getDimensionInfo(e);return t&&t.coordDim}function ar(r,e){return r&&r.containData&&e.coord&&!Mi(e)?r.containData(e.coord):!0}function Pi(r,e){return r?function(t,a,n,i){var o=i<2?t.coord&&t.coord[i]:t.value;return At(o,e[i])}:function(t,a,n,i){return At(t.value,e[i])}}function ye(r,e,t){if(t==="average"){var a=0,n=0;return r.each(e,function(i,o){isNaN(i)||(a+=i,n++)}),a/n}else return t==="median"?r.getMedian(e):r.getDataExtent(e)[t==="max"?1:0]}var Ee=Se(),Ri=(function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=xr()},e.prototype.render=function(t,a,n){var i=this,o=this.markerGroupMap;o.each(function(s){Ee(s).keep=!1}),a.eachSeries(function(s){var l=ee.getMarkerModelFromSeries(s,i.type);l&&i.renderSeries(s,l,a,n)}),o.each(function(s){!Ee(s).keep&&i.group.remove(s.group)}),Ni(a,o,this.type)},e.prototype.markKeep=function(t){Ee(t).keep=!0},e.prototype.toggleBlurSeries=function(t,a){var n=this;w(t,function(i){var o=ee.getMarkerModelFromSeries(i,n.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(a?Ea(l):Ba(l))})}})},e.type="marker",e})(gr);function Ni(r,e,t){r.eachSeries(function(a){var n=ee.getMarkerModelFromSeries(a,t),i=e.get(a.id);if(n&&i&&i.group){var o=Va(n),s=o.z,l=o.zlevel;za(i.group,s,l)}})}var Ei=(function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,a,n){return new e(t,a,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e})(ee),de=Se(),Bi=function(r,e,t,a){var n=r.getData(),i;if(F(a))i=a;else{var o=a.type;if(o==="min"||o==="max"||o==="average"||o==="median"||a.xAxis!=null||a.yAxis!=null){var s=void 0,l=void 0;if(a.yAxis!=null||a.xAxis!=null)s=e.getAxis(a.yAxis!=null?"y":"x"),l=Ga(a.yAxis,a.xAxis);else{var u=qr(a,n,e,r);s=u.valueAxis;var c=on(n,u.valueDataDim);l=ye(n,c,o)}var h=s.dim==="x"?0:1,f=1-h,p=U(a),v={coord:[]};p.type=null,p.coord=[],p.coord[f]=-1/0,v.coord[f]=1/0;var y=t.get("precision");y>=0&&or(l)&&(l=+l.toFixed(Math.min(y,20))),p.coord[h]=v.coord[h]=l,i=[p,v,{type:o,valueIndex:a.valueIndex,value:l}]}else i=[]}var d=[rr(r,i[0]),rr(r,i[1]),Y({},i[2])];return d[2].type=d[2].type||null,Z(d[2],d[0]),Z(d[2],d[1]),d};function be(r){return!isNaN(r)&&!isFinite(r)}function nr(r,e,t,a){var n=1-r,i=a.dimensions[r];return be(e[n])&&be(t[n])&&e[r]===t[r]&&a.getAxis(i).containData(e[r])}function Vi(r,e){if(r.type==="cartesian2d"){var t=e[0].coord,a=e[1].coord;if(t&&a&&(nr(1,t,a,r)||nr(0,t,a,r)))return!0}return ar(r,e[0])&&ar(r,e[1])}function Be(r,e,t,a,n){var i=a.coordinateSystem,o=r.getItemModel(e),s,l=Ct(o.get("x"),n.getWidth()),u=Ct(o.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(a.getMarkerPosition)s=a.getMarkerPosition(r.getValues(r.dimensions,e));else{var c=i.dimensions,h=r.get(c[0],e),f=r.get(c[1],e);s=i.dataToPoint([h,f])}if(at(i,"cartesian2d")){var p=i.getAxis("x"),v=i.getAxis("y"),c=i.dimensions;be(r.get(c[0],e))?s[0]=p.toGlobalCoord(p.getExtent()[t?0:1]):be(r.get(c[1],e))&&(s[1]=v.toGlobalCoord(v.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}r.setItemLayout(e,s)}var zi=(function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,a,n){a.eachSeries(function(i){var o=ee.getMarkerModelFromSeries(i,"markLine");if(o){var s=o.getData(),l=de(o).from,u=de(o).to;l.each(function(c){Be(l,c,!0,i,n),Be(u,c,!1,i,n)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,a,n,i){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Mn);this.group.add(c.group);var h=Fi(o,t,a),f=h.from,p=h.to,v=h.line;de(a).from=f,de(a).to=p,a.setData(v);var y=a.get("symbol"),d=a.get("symbolSize"),_=a.get("symbolRotate"),m=a.get("symbolOffset");F(y)||(y=[y,y]),F(d)||(d=[d,d]),F(_)||(_=[_,_]),F(m)||(m=[m,m]),h.from.each(function(g){x(f,g,!0),x(p,g,!1)}),v.each(function(g){var b=v.getItemModel(g),A=b.getModel("lineStyle").getLineStyle();v.setItemLayout(g,[f.getItemLayout(g),p.getItemLayout(g)]);var S=b.get("z2");A.stroke==null&&(A.stroke=f.getItemVisual(g,"style").fill),v.setItemVisual(g,{z2:K(S,0),fromSymbolKeepAspect:f.getItemVisual(g,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(g,"symbolOffset"),fromSymbolRotate:f.getItemVisual(g,"symbolRotate"),fromSymbolSize:f.getItemVisual(g,"symbolSize"),fromSymbol:f.getItemVisual(g,"symbol"),toSymbolKeepAspect:p.getItemVisual(g,"symbolKeepAspect"),toSymbolOffset:p.getItemVisual(g,"symbolOffset"),toSymbolRotate:p.getItemVisual(g,"symbolRotate"),toSymbolSize:p.getItemVisual(g,"symbolSize"),toSymbol:p.getItemVisual(g,"symbol"),style:A})}),c.updateData(v),h.line.eachItemGraphicEl(function(g){ie(g).dataModel=a,g.traverse(function(b){ie(b).dataModel=a})});function x(g,b,A){var S=g.getItemModel(b);Be(g,b,A,t,i);var C=S.getModel("itemStyle").getItemStyle();C.fill==null&&(C.fill=Fa(l,"color")),g.setItemVisual(b,{symbolKeepAspect:S.get("symbolKeepAspect"),symbolOffset:K(S.get("symbolOffset",!0),m[A?0:1]),symbolRotate:K(S.get("symbolRotate",!0),_[A?0:1]),symbolSize:K(S.get("symbolSize"),d[A?0:1]),symbol:K(S.get("symbol",!0),y[A?0:1]),style:C})}this.markKeep(c),c.group.silent=a.get("silent")||t.get("silent")},e.type="markLine",e})(Ri);function Fi(r,e,t){var a;r?a=z(r&&r.dimensions,function(u){var c=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return Y(Y({},c),{name:u,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var n=new Ie(a,t),i=new Ie(a,t),o=new Ie([],t),s=z(t.get("data"),V(Bi,e,r,t));r&&(s=yr(s,V(Vi,r)));var l=Pi(!!r,a);return n.initData(z(s,function(u){return u[0]}),null,l),i.initData(z(s,function(u){return u[1]}),null,l),o.initData(z(s,function(u){return u[2]})),o.hasItemOption=!0,{from:n,to:i,line:o}}function Gi(r){r.registerComponentModel(Ei),r.registerComponentView(zi),r.registerPreprocessor(function(e){Li(e.series,"markLine")&&(e.markLine=e.markLine||{})})}_e([Lr,nt,it,ot,Mr,st]);const ji=({allData:r,months:e,chartRef:t})=>{const a=P.useMemo(()=>{const f=new Set;return e.forEach(p=>{(r[p]||[]).forEach(v=>f.add(v.Bank_Type||"Unknown"))}),Array.from(f).sort()},[r,e]),{years:n,defaultYearRange:i}=Ir(e),[o,s]=P.useState(i);P.useEffect(()=>{s(i)},[i]);const l=P.useMemo(()=>[...e].sort(),[e]),u=P.useMemo(()=>l.filter(f=>{const p=Number(f.slice(0,4));return p>=o[0]&&p<=o[1]}),[l,o]),c=P.useMemo(()=>a.map(f=>{const p=u.map(v=>(r[v]||[]).filter(d=>(d.Bank_Type||"Unknown")===f).reduce((d,_)=>{const m=_.Card_Payments_Transactions?.Credit_Card,x=_.Card_Payments_Transactions?.Debit_Card;return d+(m?.at_PoS?.Volume||0)+(m?.Online_ecom?.Volume||0)+(x?.at_PoS?.Volume||0)+(x?.Online_ecom?.Volume||0)},0));return{type:f,values:p}}),[r,u,a]),h=P.useMemo(()=>({backgroundColor:"transparent",tooltip:{trigger:"axis",valueFormatter:f=>f.toLocaleString("en-IN")},legend:{x:"right",y:"top",type:"scroll"},grid:{left:"3%",right:"4%",top:"20%",bottom:"8%"},xAxis:{type:"category",data:u,axisLabel:{rotate:45}},yAxis:{type:"value",name:"Transaction Volume"},series:c.map(f=>({name:f.type,type:"line",data:f.values}))}),[c,u]);return I.jsxs("div",{className:"h-full grid",children:[I.jsx("div",{className:"text-lg text-center font-medium mb-4",children:"Card Transactions Volume by Bank Type Over Time"}),I.jsx("div",{className:"flex w-full justify-end gap-4 mb-2",children:I.jsx(Cr,{min:n[0],max:n[n.length-1],value:o,onChange:s,step:1})}),I.jsxs("div",{className:"self-end",children:[I.jsx(rt,{option:h,className:"w-full h-[400px]","aria-label":"Bank Type Stacked Area Chart",role:"img",tabIndex:0,onInit:f=>{t&&(t.current=f)}}),I.jsx("div",{className:"text-xs text-base-content/60 mt-2",children:"Card transactions volume by bank type over time."})]})]})};_e([it,nt,ot,Qr,Gi,wn,st]);const ae=[{label:"Credit Cards",value:"Credit_Cards"},{label:"Debit Cards",value:"Debit_Cards"},{label:"Micro ATMs",value:"Micro_ATMs"},{label:"Off-site ATMs",value:"ATMs_CRMs.Off_site"},{label:"On-site ATMs",value:"ATMs_CRMs.On_site"},{label:"PoS Terminals",value:"PoS"},{label:"Bharat QR Codes",value:"Bharat_QR_Codes"},{label:"UPI QR Codes",value:"UPI_QR_Codes"}],Zi=({allData:r,months:e,chartRef:t})=>{const[a,n]=P.useState(5),[i,o]=P.useState(ae[0].value),[s,l]=P.useState(e[0]||""),[u,c]=P.useState("");e[0]&&s!==e[0]&&l(e[0]);const h=_r,f=P.useMemo(()=>{if(!s||!r[s])return[];let d=r[s]||[];return u&&(d=d.filter(_=>_.Bank_Type===u)),d},[r,s,u]),p=(d,_)=>{const[m,x]=_.split(".");if(x)return m==="ATMs_CRMs"&&(x==="On_site"||x==="Off_site")?d.ATMs_CRMs[x]:0;switch(m){case"PoS":return d.PoS;case"Micro_ATMs":return d.Micro_ATMs;case"Bharat_QR_Codes":return d.Bharat_QR_Codes;case"UPI_QR_Codes":return d.UPI_QR_Codes;case"Credit_Cards":return d.Credit_Cards;case"Debit_Cards":return d.Debit_Cards;default:return 0}},v=P.useMemo(()=>f.length?[...f].sort((d,_)=>p(_.Infrastructure,i)-p(d.Infrastructure,i)).slice(0,a):[],[f,a,i]),y=P.useMemo(()=>({backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"shadow"},valueFormatter:d=>d.toLocaleString("en-IN")},xAxis:{type:"category",data:v.map(d=>d.Bank_Short_Name),axisLabel:{interval:0,rotate:30}},yAxis:{type:"value"},series:[{type:"bar",name:ae.find(d=>d.value===i)?.label||"",data:v.map(d=>p(d.Infrastructure,i)),emphasis:{focus:"series"}}],toolbox:{feature:{saveAsImage:{title:"Save"},dataView:{readOnly:!0},restore:{}},right:10,top:10}}),[v,i]);return I.jsxs("div",{className:"flex flex-col justify-between h-full",children:[I.jsxs("div",{className:"text-lg text-center font-medium",children:[ae.find(d=>d.value===i)?.label||""," - ",s&&Ar(s)]}),I.jsxs("div",{className:"grid gap-2",children:[I.jsxs("div",{className:"flex justify-stretch justify-items-stretch gap-4 mb-2 w-full",children:[I.jsx("div",{className:"flex flex-col text-xs font-medium text-base-content self-end",children:I.jsx(Tr,{value:a,min:1,max:f.length,onChange:n,label:"banks",className:"mt-1"})}),I.jsxs("div",{className:"flex flex-col text-xs font-medium text-base-content ml-auto",children:[I.jsx("span",{children:"Metric"}),I.jsxs("div",{className:"dropdown mt-1",children:[I.jsx("button",{popoverTarget:"metric-dropdown",className:"btn btn-sm btn-outline w-full justify-between text-base-content",type:"button","aria-haspopup":"listbox","aria-expanded":"false",children:ae.find(d=>d.value===i)?.label||"Select Metric"}),I.jsx("ul",{className:"dropdown-content menu menu-sm p-0 shadow bg-base-100 rounded-selector w-full z-10",popover:"auto",id:"metric-dropdown",role:"listbox",children:ae.map(d=>I.jsx("li",{children:I.jsx("button",{className:`w-full text-left px-4 py-2 ${i===d.value?"bg-primary text-primary-content":"text-base-content"}`,onClick:()=>o(d.value),role:"option","aria-selected":i===d.value,children:d.label})},d.value))})]})]})]}),I.jsx(Dr,{bankTypes:h,selected:u,onSelect:c})]}),I.jsx(rt,{option:y,className:"w-full h-[400px]","aria-label":"Bank Infrastructure Bar Chart",role:"img",tabIndex:0,onInit:d=>{t&&(t.current=d)}})]})};_e([Lr,nt,it,ot,Mr,Qr,st]);const Ui=({allData:r,months:e,metric:t="total",topN:a=5,chartRef:n})=>{const[i,o]=P.useState(t),[s,l]=P.useState(a),[u,c]=P.useState(""),{years:h,defaultYearRange:f}=Ir(e),[p,v]=P.useState(f);P.useEffect(()=>v(f),[f]);const y=P.useMemo(()=>[...e].sort(),[e]),d=P.useMemo(()=>y.filter(g=>{const b=Number(g.slice(0,4));return b>=p[0]&&b<=p[1]}),[y,p]),_=P.useMemo(()=>{const g=new Map;return d.forEach((b,A)=>{let S=r[b]||[];u&&(S=S.filter(C=>C.Bank_Type===u)),S.forEach(C=>{const L=C.Bank_Short_Name?.trim()||C.Bank_Name,M=C.Card_Payments_Transactions?.Credit_Card,T=C.Card_Payments_Transactions?.Debit_Card,D=i==="credit"?(M?.at_PoS?.Volume||0)+(M?.Online_ecom?.Volume||0):i==="debit"?(T?.at_PoS?.Volume||0)+(T?.Online_ecom?.Volume||0):(M?.at_PoS?.Volume||0)+(M?.Online_ecom?.Volume||0)+(T?.at_PoS?.Volume||0)+(T?.Online_ecom?.Volume||0);g.has(L)||g.set(L,{name:L,values:new Array(d.length).fill(0)}),g.get(L).values[A]=D})}),Array.from(g.values())},[r,d,i,u]),m=P.useMemo(()=>[..._].map(g=>({...g,total:g.values.reduce((b,A)=>b+A,0)})).sort((g,b)=>b.total-g.total).slice(0,s),[_,s]),x=P.useMemo(()=>({backgroundColor:"transparent",tooltip:{trigger:"axis",valueFormatter:g=>g.toLocaleString("en-IN")},legend:{x:"right",y:"top"},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",data:d,axisLabel:{rotate:45}},yAxis:{type:"value",name:"Transaction Volume"},series:m.map(g=>({name:g.name,type:"line",data:g.values}))}),[m,d]);return I.jsxs("div",{className:"flex flex-col gap-4 justify-between h-full",children:[I.jsxs("div",{className:"text-lg text-center font-medium",children:["Number of ",i.charAt(0).toUpperCase()+i.slice(1)," Card Transactions of Top ",s," Banks"]}),I.jsxs("div",{className:"grid gap-2",children:[I.jsxs("div",{className:"flex w-full items-center justify-between gap-6 mb-2",children:[I.jsx(Tr,{value:s,min:1,max:_.length,onChange:l,label:"banks"}),I.jsx(Cr,{min:h[0],max:h[h.length-1],value:p,onChange:v,step:1}),I.jsx(cn,{options:["Total","Credit","Debit"],selected:i==="total"?"Total":i==="credit"?"Credit":"Debit",onSelect:g=>o(g==="Total"?"total":g==="Credit"?"credit":"debit"),size:48})]}),I.jsx(Dr,{bankTypes:_r,selected:u,onSelect:c})]}),I.jsx(rt,{option:x,className:"w-full h-[400px] rounded-selector",onInit:g=>{n&&(n.current=g)}})]})},qi=()=>{const{posBanksData:r,months:e}=ja(),{layout:t}=P.useContext(Za),a=[{component:Ui,props:{title:"Card Transactions Top Movers",allData:r,months:e}},{component:ji,props:{title:"Card Transactions Volume by Bank Type Over Time",allData:r,months:e}},{component:sn,props:{title:"Credit Card Transactions Over Time",allData:r,months:e}},{component:Zi,props:{title:`Bank Infrastructure ( ${e[0]&&Ar(e[0])} )`,allData:r,months:e}}];return I.jsx(I.Fragment,{children:I.jsxs("article",{children:[t==="grid"&&I.jsx(ln,{charts:a}),t==="accordion"&&I.jsx(un,{charts:a})]})})};export{qi as default};
