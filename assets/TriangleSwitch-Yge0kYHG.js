import{aE as p,aF as o}from"./index-D66rBVsn.js";const u=[[32,8],[56,56],[8,56]],g=[{id:"right",textDy:-16,points:[0,1]},{id:"bottom",textDy:16,points:[1,2]},{id:"left",textDy:-16,points:[2,0]}],v=(a,x,c,l)=>{const[f,y]=p.useState(-1),{sideLengths:d,perimeter:h,dashOffsets:m}=p.useMemo(()=>{const n=g.map((t,s)=>{const[i,k]=[u[s],u[(s+1)%3]];return Math.sqrt((k[0]-i[0])**2+(k[1]-i[1])**2)}),e=n.reduce((t,s)=>t+s,0),r=[0,n[0],n[0]+n[1]];return{sideLengths:n,perimeter:e,dashOffsets:r}},[]);return p.useEffect(()=>{if(a===f||f===-1){y(a);return}const n=x.current;if(!n)return;const e=-m[f],t=-m[a]-e;let s;t>0?s=t-h:s=h+t;const k=Math.abs(s)<Math.abs(t)?e+s:e+t;n.style.transition="none",n.style.strokeDashoffset=`${e}`,requestAnimationFrame(()=>{n.style.transition="stroke-dashoffset 350ms cubic-bezier(0.4, 0, 0.2, 1)",n.style.strokeDashoffset=`${k}`});const b=()=>y(a);return n.addEventListener("transitionend",b,{once:!0}),()=>n.removeEventListener("transitionend",b)},[a,f,m,h]),p.useEffect(()=>{c.current?.querySelector(`[aria-label="${l}"]`)?.focus()},[l,c]),{sideLengths:d,perimeter:h,dashOffsets:m}},D=({options:a,selected:x,onSelect:c,size:l=64})=>{const f=p.useRef(null),y=p.useRef(null),d=a.indexOf(x),{sideLengths:h,perimeter:m,dashOffsets:n}=v(d,f,y,x);return o.jsx("div",{ref:y,className:"flex flex-col items-center justify-center",style:{minWidth:l*2,minHeight:l*1.5},role:"radiogroup","aria-label":"Triangle switch",children:o.jsxs("svg",{width:l,height:l,viewBox:"0 0 64 64",className:"block mx-auto",style:{touchAction:"manipulation",overflow:"visible",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision"},children:[o.jsx("polygon",{points:"32,8 56,56 8,56",fill:"none",stroke:"var(--color-base-300)",strokeWidth:8}),o.jsx("polygon",{ref:f,points:"32,8 56,56 8,56",fill:"none",stroke:"var(--color-primary)",strokeWidth:10,strokeLinejoin:"round",strokeLinecap:"round",strokeDasharray:`${h[d]},${m-h[d]}`,strokeDashoffset:-n[d],opacity:1,pointerEvents:"none"}),o.jsx("defs",{children:g.map(e=>{let[r,t]=e.points.map(s=>u[s]);return e.id==="bottom"&&([r,t]=[t,r]),o.jsx("path",{id:e.id,d:`M${r[0]},${r[1]} L${t[0]},${t[1]}`,fill:"none"},e.id)})}),a.map((e,r)=>{const t=g[r],s=d===r;return o.jsxs(p.Fragment,{children:[o.jsx("line",{x1:u[t.points[0]][0],y1:u[t.points[0]][1],x2:u[t.points[1]][0],y2:u[t.points[1]][1],stroke:"var(--color-base-300)",strokeWidth:12,opacity:.3,strokeLinecap:"round",style:{cursor:"pointer",transition:"opacity 0.2s",opacity:s?.2:.1,outline:"none"},tabIndex:s?0:-1,role:"radio","aria-checked":s,"aria-label":e,onClick:()=>c(e),onKeyDown:i=>(i.key===" "||i.key==="Enter")&&c(e)}),o.jsx("text",{fontSize:16,fill:"var(--color-base-content)",className:["cursor-pointer","focus:outline-none","overflow-visible","transition-all","duration-200",s?"font-bold":"font-light"].join(" "),dy:t.textDy,tabIndex:0,role:"radio","aria-checked":s,"aria-label":e,onClick:()=>c(e),onKeyDown:i=>(i.key===" "||i.key==="Enter")&&c(e),children:o.jsx("textPath",{href:`#${t.id}`,startOffset:"50%",textAnchor:"middle",dominantBaseline:"middle",children:e})})]},e)})]})})};export{D as T};
