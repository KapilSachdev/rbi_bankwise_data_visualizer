import{r as t,j as s}from"./index-CHDSHbxG.js";function N(a,o=1e3){const[u,c]=t.useState(a),r=t.useRef(null);return t.useEffect(()=>(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{c(a)},o),()=>{r.current&&clearTimeout(r.current)}),[a,o]),u}const E=({options:a,selectedValue:o,onSelect:u,placeholder:c="Select...",displayFormat:r=l=>l.label,triggerClassName:v="",inputClassName:w="focus:outline-none"})=>{const[l,i]=t.useState(!1),[m,x]=t.useState(""),g=t.useRef(null),f=t.useRef(null),b=N(m,300),d=a.find(e=>e.value===o),n=t.useMemo(()=>a.filter(e=>e.label.toLowerCase().includes(b.toLowerCase())||e.shortName&&e.shortName.toLowerCase().includes(b.toLowerCase())),[a,b]),j=t.useCallback(e=>{x(e.target.value)},[]),h=t.useCallback(e=>{u(e),i(!1),x("")},[u]),C=t.useCallback(e=>{e.key==="Enter"&&n.length>0?h(n[0].value):e.key==="Escape"&&i(!1)},[n,h]),p=t.useCallback(e=>{f.current&&!f.current.contains(e.target)&&i(!1)},[]);return t.useEffect(()=>(l&&(document.addEventListener("mousedown",p),g.current?.focus()),()=>document.removeEventListener("mousedown",p)),[l,p]),s.jsx(s.Fragment,{children:l?s.jsxs("div",{children:[s.jsx("div",{className:"fixed inset-0 bg-base-100/80 backdrop-blur-xs z-40"}),s.jsx("div",{ref:f,className:"relative z-[100]",children:s.jsxs("div",{className:"relative w-full",children:[s.jsx("input",{ref:g,type:"text",className:`${w} border border-base-300 rounded-t-selector bg-base-300 shadow-lg w-full min-w-0 p-2`,value:m,onChange:j,onKeyDown:C,placeholder:d?r(d):c,"aria-label":"Search options",autoFocus:!0}),s.jsxs("ul",{className:"absolute top-full left-0 right-0 bg-base-300 border border-base-300 border-t-0 rounded-b-selector shadow-lg max-h-60 overflow-y-auto",children:[n.map(e=>s.jsx("li",{children:s.jsx("button",{className:"w-full text-left p-2 hover:bg-base-200 overflow-hidden whitespace-nowrap text-ellipsis cursor-pointer",onClick:()=>h(e.value),title:r(e),children:r(e)})},e.value)),n.length===0&&s.jsx("li",{className:"p-2 text-gray-500",children:"No options found"})]})]})})]}):s.jsxs("h1",{className:`${v} group p-2 w-full border border-transparent cursor-text`,onClick:()=>i(!0),"aria-label":"Select",children:[s.jsx("span",{className:"opacity-0 group-hover:opacity-100 group-hover:animate-pulse",children:"|"}),s.jsx("span",{className:"group-hover:opacity-50",children:d?r(d):c})]})})};export{E as T};
